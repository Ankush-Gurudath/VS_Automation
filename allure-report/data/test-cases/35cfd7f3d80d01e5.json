{"uid":"35cfd7f3d80d01e5","name":"test_vehicle_list_update_on_partial_delete[QM408-QM40849291]","fullName":"tests.test_LQ_15231.TestFilterClearing#test_vehicle_list_update_on_partial_delete","historyId":"9026bf80a5c027fdac2c395372c7987a","time":{"start":1760098954167,"stop":1760098964853,"duration":10686},"description":"\n@P2\nScenario: the vehicle list is updated accordingly when delete the charactors\nGiven \"Video Reviewer Plus\" user is in VIDEO SEARCH\nAnd the full serial number is in search by Serial Number filter\nAnd all the vehicles attached ER with the full serial number charactors are filtered out\nWhen the user deletes some charactors from the filter\nThen the vehicle list is updated accordingly\nAnd the vehicle count number is updated accordingly\n","descriptionHtml":"<p>@P2<br />\nScenario: the vehicle list is updated accordingly when delete the charactors<br />\nGiven &quot;Video Reviewer Plus&quot; user is in VIDEO SEARCH<br />\nAnd the full serial number is in search by Serial Number filter<br />\nAnd all the vehicles attached ER with the full serial number charactors are filtered out<br />\nWhen the user deletes some charactors from the filter<br />\nThen the vehicle list is updated accordingly<br />\nAnd the vehicle count number is updated accordingly</p>\n","status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.aws.drivecam.net/api/videosearch-api/devices","statusTrace":"self = <test_LQ_15231.TestFilterClearing object at 0x000002940735C7C0>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"15e9fb6da8f478e2f87f8c4277667901\")>\nserial_number = 'QM408', expected_match = 'QM40849291'\n\n    @pytest.mark.order(4)\n    @pytest.mark.parametrize(\"serial_number,expected_match\", VideoSearchDataProd.SERIAL_NUMBER_SEARCH_DATA)\n    def test_vehicle_list_update_on_partial_delete(self, driver, serial_number, expected_match):\n        \"\"\"\n        @P2\n        Scenario: the vehicle list is updated accordingly when delete the charactors\n        Given \"Video Reviewer Plus\" user is in VIDEO SEARCH\n        And the full serial number is in search by Serial Number filter\n        And all the vehicles attached ER with the full serial number charactors are filtered out\n        When the user deletes some charactors from the filter\n        Then the vehicle list is updated accordingly\n        And the vehicle count number is updated accordingly\n        \"\"\"\n        video_search_page = VideoSearchPage(driver)\n        api_client = LytxApiClient(VideoSearchDataProd.login_username, VideoSearchDataProd.login_password)\n    \n        # Record initial vehicle count\n        initial_vehicle_count = int(video_search_page.get_vehicle_count())\n        print(f\"Initial vehicle count: {initial_vehicle_count}\")\n    \n        # 1. Set up serial number search with longer string\n        initial_search_term = expected_match  # Use the full/exact match\n        video_search_page.click_select_search_filter()\n        video_search_page.select_serial_number_dropdown()\n        video_search_page.search_criteria_textbox(initial_search_term, press_enter=True)\n    \n        # Wait for filtering to complete\n        time.sleep(2)\n    \n        # 2. Verify filtering worked\n        initial_filtered_count = int(video_search_page.get_vehicle_count())\n        print(f\"Filtered count with serial number '{initial_search_term}': {initial_filtered_count}\")\n    \n        # Verify with API\n>       api_initial_filtered_count = api_client.get_vehicle_count_by_serial_number(initial_search_term)\n                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_LQ_15231.py:219: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nutils\\api_helpers.py:111: in get_vehicle_count_by_serial_number\n    response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Response [400]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.aws.drivecam.net/api/videosearch-api/devices\n\nC:\\Users\\HanumeshJoshi\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\requests\\models.py:1024: HTTPError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"driver","time":{"start":1760098838568,"stop":1760098882019,"duration":43451},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false}],"testStage":{"description":"\n@P2\nScenario: the vehicle list is updated accordingly when delete the charactors\nGiven \"Video Reviewer Plus\" user is in VIDEO SEARCH\nAnd the full serial number is in search by Serial Number filter\nAnd all the vehicles attached ER with the full serial number charactors are filtered out\nWhen the user deletes some charactors from the filter\nThen the vehicle list is updated accordingly\nAnd the vehicle count number is updated accordingly\n","status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.aws.drivecam.net/api/videosearch-api/devices","statusTrace":"self = <test_LQ_15231.TestFilterClearing object at 0x000002940735C7C0>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"15e9fb6da8f478e2f87f8c4277667901\")>\nserial_number = 'QM408', expected_match = 'QM40849291'\n\n    @pytest.mark.order(4)\n    @pytest.mark.parametrize(\"serial_number,expected_match\", VideoSearchDataProd.SERIAL_NUMBER_SEARCH_DATA)\n    def test_vehicle_list_update_on_partial_delete(self, driver, serial_number, expected_match):\n        \"\"\"\n        @P2\n        Scenario: the vehicle list is updated accordingly when delete the charactors\n        Given \"Video Reviewer Plus\" user is in VIDEO SEARCH\n        And the full serial number is in search by Serial Number filter\n        And all the vehicles attached ER with the full serial number charactors are filtered out\n        When the user deletes some charactors from the filter\n        Then the vehicle list is updated accordingly\n        And the vehicle count number is updated accordingly\n        \"\"\"\n        video_search_page = VideoSearchPage(driver)\n        api_client = LytxApiClient(VideoSearchDataProd.login_username, VideoSearchDataProd.login_password)\n    \n        # Record initial vehicle count\n        initial_vehicle_count = int(video_search_page.get_vehicle_count())\n        print(f\"Initial vehicle count: {initial_vehicle_count}\")\n    \n        # 1. Set up serial number search with longer string\n        initial_search_term = expected_match  # Use the full/exact match\n        video_search_page.click_select_search_filter()\n        video_search_page.select_serial_number_dropdown()\n        video_search_page.search_criteria_textbox(initial_search_term, press_enter=True)\n    \n        # Wait for filtering to complete\n        time.sleep(2)\n    \n        # 2. Verify filtering worked\n        initial_filtered_count = int(video_search_page.get_vehicle_count())\n        print(f\"Filtered count with serial number '{initial_search_term}': {initial_filtered_count}\")\n    \n        # Verify with API\n>       api_initial_filtered_count = api_client.get_vehicle_count_by_serial_number(initial_search_term)\n                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_LQ_15231.py:219: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nutils\\api_helpers.py:111: in get_vehicle_count_by_serial_number\n    response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Response [400]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.aws.drivecam.net/api/videosearch-api/devices\n\nC:\\Users\\HanumeshJoshi\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\requests\\models.py:1024: HTTPError","steps":[],"attachments":[{"uid":"cdc088476b55dd9","name":"stdout","source":"cdc088476b55dd9.txt","type":"text/plain","size":77}],"parameters":[],"attachmentsCount":1,"shouldDisplayMessage":true,"attachmentStep":false,"stepsCount":0,"hasContent":true},"afterStages":[{"name":"driver::0","time":{"start":1760098975398,"stop":1760098978477,"duration":3079},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_LQ_15231"},{"name":"subSuite","value":"TestFilterClearing"},{"name":"host","value":"LYTX-PF50CMWR"},{"name":"thread","value":"23400-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_LQ_15231"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"expected_match","value":"'QM40849291'"},{"name":"serial_number","value":"'QM408'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"35cfd7f3d80d01e5.json","parameterValues":["'QM40849291'","'QM408'"]}