{"uid":"f91a45ba4f3000f2","name":"test_delete_serial_number_filter[QM408-QM40849291]","fullName":"tests.test_LQ_15231.TestFilterClearing#test_delete_serial_number_filter","historyId":"df97dac7cad6ec4ee060ce71087f798c","time":{"start":1758266315050,"stop":1758266324706,"duration":9656},"description":"\n@P2\nScenario: Delete the Search by Serial Number filter\nGiven \"Video Reviewer Plus\" user is in VIDEO SEARCH\nAnd the serial number is in search by Serial Number filter\nAnd all the vehicles attached ER with the serial number characters are filtered out\nWhen the user clicks \"X\" button in the filter\nThen the Serial Number filter is cleared\nAnd the vehicle list is reset\nAnd the vehicle count number is updated\n","descriptionHtml":"<p>@P2<br />\nScenario: Delete the Search by Serial Number filter<br />\nGiven &quot;Video Reviewer Plus&quot; user is in VIDEO SEARCH<br />\nAnd the serial number is in search by Serial Number filter<br />\nAnd all the vehicles attached ER with the serial number characters are filtered out<br />\nWhen the user clicks &quot;X&quot; button in the filter<br />\nThen the Serial Number filter is cleared<br />\nAnd the vehicle list is reset<br />\nAnd the vehicle count number is updated</p>\n","status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.aws.drivecam.net/api/videosearch-api/devices","statusTrace":"self = <test_LQ_15231.TestFilterClearing object at 0x000001BB25ADE9E0>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"15027bc07c9e9de2f8d6b29cdf63548d\")>\nserial_number = 'QM408', expected_match = 'QM40849291'\n\n    @pytest.mark.order(3)\n    @pytest.mark.parametrize(\"serial_number,expected_match\", VideoSearchDataProd.SERIAL_NUMBER_SEARCH_DATA)\n    def test_delete_serial_number_filter(self, driver, serial_number, expected_match):\n        \"\"\"\n        @P2\n        Scenario: Delete the Search by Serial Number filter\n        Given \"Video Reviewer Plus\" user is in VIDEO SEARCH\n        And the serial number is in search by Serial Number filter\n        And all the vehicles attached ER with the serial number characters are filtered out\n        When the user clicks \"X\" button in the filter\n        Then the Serial Number filter is cleared\n        And the vehicle list is reset\n        And the vehicle count number is updated\n        \"\"\"\n        video_search_page = VideoSearchPage(driver)\n        api_client = LytxApiClient(VideoSearchDataProd.login_username, VideoSearchDataProd.login_password)\n    \n        # Record initial vehicle count\n        initial_vehicle_count = int(video_search_page.get_vehicle_count())\n        print(f\"Initial vehicle count: {initial_vehicle_count}\")\n    \n        # 1. Set up serial number search\n        search_term = serial_number\n        video_search_page.click_select_search_filter()\n        video_search_page.select_serial_number_dropdown()\n        video_search_page.search_criteria_textbox(search_term, press_enter=True)\n    \n        # Wait for filtering to complete\n        time.sleep(2)\n    \n        # 2. Verify filtering worked\n        filtered_count = int(video_search_page.get_vehicle_count())\n        print(f\"Filtered count with serial number '{search_term}': {filtered_count}\")\n    \n        # Verify with API\n>       api_filtered_count = api_client.get_vehicle_count_by_serial_number(search_term)\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_LQ_15231.py:166: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nutils\\api_helpers.py:111: in get_vehicle_count_by_serial_number\n    response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Response [400]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.aws.drivecam.net/api/videosearch-api/devices\n\nC:\\Users\\HanumeshJoshi\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\requests\\models.py:1024: HTTPError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"driver","time":{"start":1758266224908,"stop":1758266264902,"duration":39994},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0}],"testStage":{"description":"\n@P2\nScenario: Delete the Search by Serial Number filter\nGiven \"Video Reviewer Plus\" user is in VIDEO SEARCH\nAnd the serial number is in search by Serial Number filter\nAnd all the vehicles attached ER with the serial number characters are filtered out\nWhen the user clicks \"X\" button in the filter\nThen the Serial Number filter is cleared\nAnd the vehicle list is reset\nAnd the vehicle count number is updated\n","status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.aws.drivecam.net/api/videosearch-api/devices","statusTrace":"self = <test_LQ_15231.TestFilterClearing object at 0x000001BB25ADE9E0>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"15027bc07c9e9de2f8d6b29cdf63548d\")>\nserial_number = 'QM408', expected_match = 'QM40849291'\n\n    @pytest.mark.order(3)\n    @pytest.mark.parametrize(\"serial_number,expected_match\", VideoSearchDataProd.SERIAL_NUMBER_SEARCH_DATA)\n    def test_delete_serial_number_filter(self, driver, serial_number, expected_match):\n        \"\"\"\n        @P2\n        Scenario: Delete the Search by Serial Number filter\n        Given \"Video Reviewer Plus\" user is in VIDEO SEARCH\n        And the serial number is in search by Serial Number filter\n        And all the vehicles attached ER with the serial number characters are filtered out\n        When the user clicks \"X\" button in the filter\n        Then the Serial Number filter is cleared\n        And the vehicle list is reset\n        And the vehicle count number is updated\n        \"\"\"\n        video_search_page = VideoSearchPage(driver)\n        api_client = LytxApiClient(VideoSearchDataProd.login_username, VideoSearchDataProd.login_password)\n    \n        # Record initial vehicle count\n        initial_vehicle_count = int(video_search_page.get_vehicle_count())\n        print(f\"Initial vehicle count: {initial_vehicle_count}\")\n    \n        # 1. Set up serial number search\n        search_term = serial_number\n        video_search_page.click_select_search_filter()\n        video_search_page.select_serial_number_dropdown()\n        video_search_page.search_criteria_textbox(search_term, press_enter=True)\n    \n        # Wait for filtering to complete\n        time.sleep(2)\n    \n        # 2. Verify filtering worked\n        filtered_count = int(video_search_page.get_vehicle_count())\n        print(f\"Filtered count with serial number '{search_term}': {filtered_count}\")\n    \n        # Verify with API\n>       api_filtered_count = api_client.get_vehicle_count_by_serial_number(search_term)\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_LQ_15231.py:166: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nutils\\api_helpers.py:111: in get_vehicle_count_by_serial_number\n    response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <Response [400]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.aws.drivecam.net/api/videosearch-api/devices\n\nC:\\Users\\HanumeshJoshi\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\requests\\models.py:1024: HTTPError","steps":[],"attachments":[{"uid":"84e5b681919a894c","name":"stdout","source":"84e5b681919a894c.txt","type":"text/plain","size":71}],"parameters":[],"hasContent":true,"attachmentsCount":1,"shouldDisplayMessage":true,"attachmentStep":false,"stepsCount":0},"afterStages":[{"name":"driver::0","time":{"start":1758266355057,"stop":1758266357655,"duration":2598},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_LQ_15231"},{"name":"subSuite","value":"TestFilterClearing"},{"name":"host","value":"LYTX-PF50CMWR"},{"name":"thread","value":"13120-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_LQ_15231"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"expected_match","value":"'QM40849291'"},{"name":"serial_number","value":"'QM408'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[]}],"tags":[]},"source":"f91a45ba4f3000f2.json","parameterValues":["'QM40849291'","'QM408'"]}